service: wisaw


# Use serverless-webpack plugin to transpile ES6/ES7
plugins:
  - serverless-webpack
# Enable auto-packing of external modules
custom:
  webpackIncludeModules: true

provider:
  name: aws
  runtime: nodejs6.10
  memorySize: 128
  timeout: 30
  versionFunctions: false # optional, default is true


functions:
  helloWorld: # just for testing purposes
    handler: api/src/controllers/hello_world.main
    description: greetings message for world
    events:
      - http:
          path: hello
          method: get
          private: false
  cleanupPhotos: # http endpoint
    handler: api/src/controllers/photos/cleanupPhotos.main
    description: cleaning up old photos
    events:
      - http:
          path: cleanupPhotos
          method: get
          private: false
  cleanupPhotosContinuously: # the same as above (reusing the same function), but is invoked by a scheduler
    handler: api/src/controllers/photos/cleanupPhotos.main
    description: cleaning up old photos periodically once an hour
    events:
      - schedule:
          rate: rate(1 hour)
          enabled: true
